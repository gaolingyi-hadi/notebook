#  DOM 事件机制

当dom触发元素事件,那么其对应的父元素和子元素的事件应不应该触发,顺序又是怎样的

## 捕获和冒泡
将一个很重的木制品丢入水中,它会率先沉入水中,然后达到最低点再上浮至水面.沉入的过程就是捕获,上浮的过程就是冒泡,下面看这段代码
```html
<div class="div1" onclick="console.log(`爷爷`)">
    爷爷
    <div class="div2" onclick="console.log(`爸爸`)">
        爸爸
        <div class="div3" onclick="console.log(`儿子`)">儿子</div>
    </div>
</div>
```
> 冒泡是元素从小到大调用事件函数

当我们点击了*儿子*,也表示点击到了*爸爸*和*爷爷*,那么它们身上的点击事件会依次按`儿子=>爸爸=>爷爷`的顺序触发,这就是冒泡,冒泡是可以通过`e.stopPropagation()`取消的  
<br/>

> 捕获是元素从大到小调用事件函数

当我们再一次点击*儿子*,事件按`爷爷=>爸爸=>儿子`的顺序触发,这就是捕获,捕获是不可以取消的

## 捕获和冒泡会不会同时进行?
不会,声明监听事件时可以选择触发在捕获阶段还是冒泡阶段,默认是冒泡

## 事件委托
就是利用冒泡将子元素的事件交给其父元素监听
```html
<body>
    <ul id="father">
        <li data-name="张三">张三</li>
        <li data-name="李四">李四</li>
    </ul>
</body>
<script>
    father.addEventListener('click', function (e) {
        console.log(e.path[0].dataset.name)
    });
</script>
```
### 这样做的好处
1. 这样可以省监听数量,减小内存占用,当有多个元素需要被监听,只需要监听父元素,判断事件是由哪个子元素冒泡上来的
2. 动态添加的元素依然可以被监听到,不需要主动添加事件